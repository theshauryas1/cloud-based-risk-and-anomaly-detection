# ──────────────────────────────────────────────────────────────────────────────
#  .github/workflows/deploy.yml
#  CD Pipeline: Deploy to Render on push to main.
#  Requires RENDER_DEPLOY_HOOK_URL secret in repository settings.
# ──────────────────────────────────────────────────────────────────────────────

name: Deploy to Render

on:
  push:
    branches: [main]

jobs:
  deploy:
    name: Trigger Render Deploy
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Render deploy hook
        run: |
          curl -fsSL "${{ secrets.RENDER_DEPLOY_HOOK_URL }}" \
            -X POST \
            --retry 3 \
            --retry-delay 5

      - name: Confirm deploy triggered
        run: echo "Deploy hook triggered successfully."
